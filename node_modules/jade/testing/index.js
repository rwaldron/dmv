
/**
 * Module dependencies.
 */

var jade = require('./../lib/jade')
  , Compiler = jade.Compiler
  , nodes = jade.nodes;



var locals = {
  title: 'Yahoo'
};

var path = __dirname + '/test.jade'
  , fs = require('fs')
  , str = fs.readFileSync(path, 'utf8');

// TODO: optimize
jade.filters.template = function(str){
  return str.replace(/#/g, '\\#');
};

var fn = jade.compile(str, {
    filename: 'testing/test.jade'
  , debug: true
  // , client: true
  , compileDebug: false
  // , colons: true
  , pretty: true
  , self: true
  // , inline: false
});

User = {};
User.remove = function(){
  console.log('removed all users! oh noes!');
};

// console.error(fn.toString());
// console.log('\n---\n');

var n = 5000
  , users = [];

while (n--) users.push({ name: 'tobi' });

users.recent = function(){
  return users
}
var start = new Date;
// 17
console.log(fn({ users: users }));
console.log(new Date - start);

